"use strict";var __webpack_require__={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},d:(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const external_jQuery_namespaceObject=window.jQuery;var external_jQuery_default=__webpack_require__.n(external_jQuery_namespaceObject);const external_wp_apiFetch_namespaceObject=window.wp.apiFetch;var external_wp_apiFetch_default=__webpack_require__.n(external_wp_apiFetch_namespaceObject);external_jQuery_default()(document).ready((function(){var e=null,t=!1;function a(){external_jQuery_default()('.post-type-coca_bais form#post input[type="submit"], .post-type-coca_bais form#post button[type="submit"]').on("click touchstart",(function(t){(e=external_jQuery_default()(this)).clickedAt=Date.now(),e.buttonName=external_jQuery_default()(this).attr("name")||"",e.buttonValue=external_jQuery_default()(this).val()||external_jQuery_default()(this).text()||"",e.buttonId=external_jQuery_default()(this).attr("id")||""}))}function n(e,a,n){try{external_jQuery_default()(e).off("submit"),external_jQuery_default()('.post-type-coca_bais form#post input[type="submit"], .post-type-coca_bais form#post button[type="submit"]').off("click touchstart"),window.onbeforeunload=null,external_jQuery_default()(window).off("beforeunload"),a&&(["#post_status","#original_post_status","#hidden_post_status"].forEach((function(e){external_jQuery_default()(e).length&&external_jQuery_default()(e).val("publish")})),external_jQuery_default()('input[name="publish"][type="hidden"]').remove(),external_jQuery_default()("<input>").attr({type:"hidden",name:"publish",value:"Publish"}).appendTo(e),external_jQuery_default()("#post_action").length&&external_jQuery_default()("#post_action").val("publish"));var o=function(){if(t=!1,e.submit&&"function"==typeof e.submit)e.submit();else{var n=document.createElement("input");n.type="submit",n.style.display="none",a&&(n.name="publish",n.value="Publish"),e.appendChild(n),n.click()}},u=navigator.userAgent.toLowerCase();-1!==u.indexOf("safari")&&-1===u.indexOf("chrome")?setTimeout(o,150):-1!==u.indexOf("firefox")?setTimeout(o,10):setTimeout(o,50)}catch(e){if(console.error("Form submission error:",e),t=!1,!n){var r=window.location.href;r+=(-1!==r.indexOf("?")?"&":"?")+"submit_failed=1",window.location.href=r}}}a(),external_jQuery_default()(".post-type-coca_bais form#post").on("submit",(function(a){if(t)return!1;var o;try{o=window.localStorage.getItem("coca_bais_data")}catch(e){return void console.warn("localStorage not available:",e)}if(o){var u=this,r=e;(!r||Date.now()-(r.clickedAt||0)>5e3)&&((r=external_jQuery_default()(document.activeElement))&&r.is("input, button")||(r=external_jQuery_default()(u).find('input[name="publish"], button[name="publish"], #publish, .editor-post-publish-button').first()));var i,l=function(e){if(!e)return!1;var t=e.buttonName||e.attr("name")||"",a=e.buttonValue||e.val()||e.text()||"",n=e.buttonId||e.attr("id")||"",o=e.attr("class")||"";return"publish"===t||"Publish"===a||-1!==a.indexOf("Publish")||"publish"===n||-1!==n.indexOf("publish")||-1!==o.indexOf("publish")||-1!==o.indexOf("editor-post-publish-button")}(r);try{i=JSON.parse(o)}catch(e){return console.error("Invalid localStorage JSON:",e),confirm("Invalid meta data format. Do you want to continue anyway?")?void 0:(a.preventDefault(),!1)}i&&"object"==typeof i&&(a.preventDefault(),t=!0,i.post_id=external_jQuery_default()("#post_ID").val(),i.intended_status=l?"publish":"draft",("undefined"!=typeof wp&&wp.apiFetch?wp.apiFetch({path:"/coca-bais/v1/save-post-meta",method:"POST",data:i}):void 0!==external_wp_apiFetch_default()?external_wp_apiFetch_default()({path:"/coca-bais/v1/save-post-meta",method:"POST",data:i}):external_jQuery_default().ajax({url:"/wp-json/coca-bais/v1/save-post-meta",method:"POST",contentType:"application/json",data:JSON.stringify(i),beforeSend:function(e){var t=external_jQuery_default()("#_wpnonce").val()||external_jQuery_default()('input[name="_wpnonce"]').val();t&&e.setRequestHeader("X-WP-Nonce",t)}})).then((function(e){n(u,l,!1)})).catch((function(e){console.error("Meta save failed:",e),confirm("Failed to save meta data. Do you want to continue anyway?")?n(u,l,!1):t=!1}))),e=null}})),external_jQuery_default()(document).ajaxComplete((function(){setTimeout(a,100)})),document.addEventListener&&document.addEventListener("visibilitychange",(function(){document.hidden||(t=!1)}))}));